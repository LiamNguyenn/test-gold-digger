version: 2
models:
  - name: dim_services
    description: "This is a dimension table for for all HR and Payroll services"
    meta: 
      upstream_system_owner: ""
      data_owner: "gold-diggers"
    columns:
      - name: dim_service_sk
        description: Surrogate key created as a PK which takes the service name as the input
      - name: service_name
        description: The cleansed service name

  - name: dim_squads
    description: "This is a dimension table for for all squad names"
    schema: mart
    materialized: table
    meta: 
      upstream_system_owner: ""
      data_owner: "gold-diggers"
    columns:
      - name: dim_squad_sk
        description: Surrogate key created as a PK which takes the squad name as the input
      - name: squad_name
        description: The name of the squad

  - name: fct_platform_uptime
    description: "This is the fact table for platform uptime currently for Payroll and HR platform. The table is set at daily granularity level"
    meta: 
      upstream_system_owner: ""
      data_owner: "gold-diggers"
    columns:
      - name: date
        description: The calendar date for which uptime is shown
      - name: platform
        description: States whether the platform is HR or Payroll 
      - name: overall_platform_uptime
        description: Platform uptime for the date in seconds
      - name: qbo_au_platform_uptime
        description: The uptime in seconds for QuickBooks Australia Payroll platform. This is always NULLl when platform is HR  
      - name: qbo_uk_platform_uptime
        description: The uptime in seconds for QuickBooks UK Payroll platform. This is always NULLl when platform is HR
      - name: dim_date_sk
        description: The generated surrogate key for the transaction date, to be joined with dim_date
      
  - name: fct_service_uptime
    description: "This is the fact table for individual service / component uptime for HR and Payroll platform"
    meta: 
      upstream_system_owner: ""
      data_owner: "gold-diggers"
    columns:
      - name: date
        description: The calendar date for which uptime is shown
      - name: platform
        description: Either HR or Payroll
      - name: dim_service_sk
        description: "Surrogate key of the service from dim_services"
        tests:
          - not_null
      - name: service_uptime
        description: The uptime in seconds for the given service and date
      - name: dim_date_sk
        description: The generated surrogate key for the transaction date, to be joined with dim_date
      
