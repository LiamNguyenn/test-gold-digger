version: 2

models:
    - name: sales_opportunities
      schema: sales
      alias: opportunities
      columns:
        - name: id
          tests:
            - not_null
            - unique
    
    - name: sales_sales_assisted_opportunities
      schema: sales
      alias: sales_assisted_opportunities
      columns:
        - name: id
          tests:
            - not_null
            - unique

    - name: sales_opportunity_master
      schema: sales
      alias: opportunity_master
      config:
        grants:
          select: ['zackwei', 'tableau']
      columns:
        - name: id
          tests:            
            - not_null
            - unique

    - name: sales_lead_master
      schema: sales
      alias: lead_master
      config:
        grants:
          select: ['zackwei', 'tableau']
      columns:
        - name: id
          tests:            
            - not_null
            - unique

    - name: sales_organic_leads
      schema: sales
      alias: organic_leads
      columns:
        - name: lead_id   
          tests:            
            - not_null
        - name: lead_name
          meta:
            sensitive: true
            masking_rules:
              full_mask:
                mask_function: md5 
        - name: lead_email
          meta:
            sensitive: true
            masking_rules:
              full_mask:
                mask_function: md5 

    - name: sales_csat      
      schema: sales
      alias: csat
      columns:
        - name: id   
          tests:            
            - not_null
            - unique
        - name: name
          meta:
            sensitive: true
            masking_rules:
              full_mask:
                mask_function: md5 
        - name: email
          meta:
            sensitive: true
            masking_rules:
              full_mask:
                mask_function: md5 
                        
    - name: sales_closed_lost_opportunities
      schema: sales
      alias: closed_lost_opportunities
      columns:
        - name: opportunity_id
          tests:            
            - not_null   
            - unique  