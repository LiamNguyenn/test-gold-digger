version: 2

models:
    - name: employment_hero_employee_status_by_org
      schema: employment_hero
      alias: employee_status_by_org
      columns:
        - name: member_id
          tests:            
            - not_null
            - unique
            
    - name: employment_hero_guided_milestones_by_org
      schema: employment_hero
      alias: guided_milestones_by_org
      columns:
        - name: organisation_id
          tests:            
            - not_null
            - unique

    - name: employment_hero_v_ei_organisations
      schema: employment_hero
      alias: _v_ei_organisations
      columns:
        - name: organisation_id
          tests:            
            - not_null
            - unique

    - name: employment_hero_v_gt_employees
      schema: employment_hero
      alias: _v_gt_employees
      columns:
        - name: host_member_id
          tests:            
            - not_null
            - unique

    - name: employment_hero_v_swag_career_blacklist_organisations
      schema: employment_hero
      alias: _v_swag_career_blacklist_organisations
      columns:
        - name: organisation_id
          tests:            
            - not_null
            - unique
    
    - name: employment_hero_v_employees_first_time_swag_app
      schema: employment_hero
      alias: _v_employees_first_time_swag_app
      columns:
        - name: user_email
          tests:            
            - not_null
            - unique

    - name: employment_hero_v_active_employees_by_organisations
      schema: employment_hero
      alias: _v_active_employees_by_organisations
      columns:
        - name: organisation_id
          tests:            
            - not_null
            - unique
            
    - name: employment_hero_organisations
      schema: employment_hero
      alias: organisations
      config:
        grants:
          select: ['dbt_cloud', 'tableau']
      columns:
        - name: id   
          tests:            
            - not_null
            - unique
        - name: creator_email
          meta:
              sensitive: true
              masking_rules:
                full_mask:
                  mask_function: sha2-256
        - name: hr_champion_emails
          meta:
              sensitive: true
              masking_rules:
                full_mask:
                  mask_function: sha2-256
        - name: payroll_admin_emails
          meta:
              sensitive: true
              masking_rules:
                full_mask:
                  mask_function: sha2-256
        - name: payroll_champion_emails
          meta:
              sensitive: true
              masking_rules:
                full_mask:
                  mask_function: sha2-256
        - name: phone
          meta:
              sensitive: true
              masking_rules:
                full_mask:
                  mask_function: sha2-256 

    - name: employment_hero_employees
      schema: employment_hero
      alias: employees
      config:
        grants:
          select: ['dbt_cloud', 'tableau']
      columns:
        - name: id   
          tests:            
            - not_null
            - unique
        - name: company_email
          meta:
              sensitive: true
              masking_rules:
                full_mask:
                  mask_function: sha2-256
        - name: email
          meta:
              sensitive: true
              masking_rules:
                full_mask:
                  mask_function: sha2-256
        - name: home_phone
          meta:
              sensitive: true
              masking_rules:
                full_mask:
                  mask_function: sha2-256
        - name: passport_number
          meta:
              sensitive: true
              masking_rules:
                full_mask:
                  mask_function: sha2-256
        - name: personal_email
          meta:
              sensitive: true
              masking_rules:
                full_mask:
                  mask_function: sha2-256

    - name: employment_hero_guides
      schema: employment_hero
      alias: guides
      columns:
        - name: organisation_guides_id   
          tests:            
            - not_null
            - unique 

    - name: employment_hero_au_employee_monthly_pay
      schema: employment_hero
      alias: au_employee_monthly_pay
      columns:
        - name: month
            - not_null
        - name: member_id
            - not_null
